@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Sleepapnea";
    ViewData["Description"] = "Sleepapnea";
}

@model MainSite.Models.SleepapneaModel

<style>
    .panel-heading {
        cursor: pointer;
    }

    .clickable {
        cursor: pointer;
    }

        .clickable .glyphicon {
            background: rgba(0, 0, 0, 0.15);
            display: inline-block;
            padding: 6px 12px;
            border-radius: 4px;
        }

    .panel-heading span {
        margin-top: -23px;
        font-size: 15px;
        margin-right: -9px;
    }

    a.clickable {
        color: inherit;
    }

        a.clickable:hover {
            text-decoration: none;
        }
</style>

<div id="page-wrapper">
    <div class="col-xs-12">
        <h2 class="box-title m-b-0 m-t-40">Answer a Few Questions About Your Sleep Apnea Disability</h2>
        <p class="text-muted m-b-30 font-13"> Please answer each form section and click next.  It's best to answer these questions if you have access to your <a href="https://www.ebenefits.va.gov/" target="_blank">eBenefits</a>.  Each part is automatically saved when you finish it.</p>

        <form id="formsleepapnea" method="post" action="/Dashboard/SleepapneaPost?contentStateID=6">
            <input id="UserID" name="UserID" class="form-control" type="hidden" value="@Model.UserID">
            @*@if (Model.ContentStateID == 6)
                {
                    <button class="btn btn-success btn-lg btn-block text-uppercase waves-effect waves-light" type="submit">You Have Completed This Form Already, Click To Purchase</button>
                    <hr />
                }*@
            <div class="panel-group col-lg-12" id="accordion">

                <!-- Section 1 -->
                <div class="panel panel-info">
                    <div class="panel-heading" id="part1Show">
                        <h4 class="panel-title">
                            <a class="info" data-parent="#accordion" href="#collapse1">Section 1</a>
                        </h4>
                    </div>
                    <div id="collapse1" class="panel-collapse collapse in">
                        <div class="panel-body">
                            <div class="form-group m-t-20">
                                <div class="form-group m-t-20">
                                    <label class="col-md-3">First Name</label>
                                    <div class="col-xs-4">
                                        @Html.EditorFor(x => x.FirstName, new { htmlAttributes = new { @class = "form-control", placeholder = "First Name" } })
                                    </div>
                                </div>
                                <br />
                                <div class="form-group m-t-20">
                                    <label class="col-md-3">Middle Initial</label>
                                    <div class="col-xs-4">
                                        @Html.EditorFor(x => x.MiddleInitial, new { htmlAttributes = new { @class = "form-control", placeholder = "Middle Initial" } })
                                    </div>
                                </div>
                                <br />
                                <div class="form-group m-t-20">
                                    <label class="col-md-3">Last Name</label>
                                    <div class="col-xs-4">
                                        @Html.EditorFor(x => x.LastName, new { htmlAttributes = new { @class = "form-control", placeholder = "Last Name" } })
                                    </div>
                                </div>
                                <br />
                                <div class="form-group m-t-20">
                                    <label class="col-md-3">Social Security Number</label>
                                    <div class="col-xs-4">
                                        @Html.EditorFor(x => x.SocialSecurity, new { htmlAttributes = new { @class = "form-control", placeholder = "Social Security" } })
                                    </div>
                                </div>
                                <br />
                                <hr />

                                <label class="form-check-label font-normal">Have you been prescribed the use of a breathing assistance device such as a continuous positive airway pressure (CPAP) machine?</label>
                                <br />
                                @Html.EditorFor(x => x.S20) Yes
                                <br />
                                <label class="form-check-label font-normal">
                                    What is the approximate date of your last study?
                                </label>
                                <br />
                                @Html.TextBoxFor(x => x.lastSleepStudyDate, new { @class = "date-picker" })


                                @*<div class="col-xs-12">
                                    <label class="col-md-6">What is the approximate date of your last study?</label>
                                    @Html.TextBoxFor(x => x.lastSleepStudyDate, new { @class = "date-picker" })
                                </div>*@
                                <br />
                                <label class="form-check-label font-normal">
                                    Facility Name: 
                                </label>
                                <br />
                                @Html.EditorFor(x => x.FacilityName, new { htmlAttributes = new { style = "width: 600px" } })


                                @*<div class="col-xs-12">
                                    <label class="col-md-12">Name of facility where sleep study performed, if known.</label>
                                    <input id="FacilityName" name="FacilityName" class="form-control" type="text" required="" placeholder="Facility Name" value="@Model.FacilityName">
                                </div>*@
                            </div>
                            <hr />
                            <button class="btn btn-success btn-md pull-right" type="button" id="part1NextBtn">Next</button>
                        </div>
                    </div>
                </div>
                <!-- Section 1 -->
                <!-- Finish -->
                <div class="panel panel-info">
                    <div class="panel-heading" id="partfShow">
                        <h4 class="panel-title">
                            <a class="info" data-parent="#accordion" href="#collapsef">Finished</a>
                        </h4>
                    </div>
                    <div id="collapsef" class="panel-collapse collapse">
                        <div class="panel-body">
                            <h2 class="box-title m-b-0 m-t-40">Thank you for completing the questions.  Click submit to process.</h2>
                            <div class="form-check form-check-inline">
                                <label class="form-check-label font-normal">
                                    @Html.EditorFor(x => x.IsFormReadonly) Check this to make the generated dbq form NOT editable
                                </label>
                            </div>
                            <button class="btn btn-warning btn-md pull-left" type="button" id="finishPrevBtn">Prev</button>
                            <button class="btn btn-success btn-md pull-right" type="submit" id="finishBtn">Submit</button>
                        </div>
                    </div>
                </div>
                <!-- Finish -->



            </div>

        </form>
    </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script type="text/javascript">

    $('document').ready(function () {

        $(function () {
            // This should targe the element generated by your EditorFor() Helper
            $('#lastSleepStudyDate').datepicker();
        })

        var postcall = "SleepapneaPost";
        var formname = "formsleepapnea";

        initpanels();
        function save(stateid) {
            var model = $('#' + formname).serialize();
            // Serialize model for Posting model
            $.ajax({
                url: '/Dashboard/' + postcall + '?contentStateID=' + stateid,
                type: 'POST',
                data: model,  // Pass Model to Controller Using Ajax Call
                success: function (data) {
                    // Show Data
                }
            });
        }

        $("#part1NextBtn").on("click", function () {
            showf();
        });

        $("#part2NextBtn").on("click", function () {
            show3();
        });

        $("#part2PrevBtn").on("click", function () {
            show1();
        });

        $("#part3NextBtn").on("click", function () {
            show4();
        });

        $("#part3PrevBtn").on("click", function () {
            show2();
        });

        $("#part4PrevBtn").on("click", function () {
            show3();
        });

        $("#part4NextBtn").on("click", function () {
            showf();
        });

        $("#finishPrevBtn").on("click", function () {
            show1();
        });

        $("input[type=radio]").change(function () {
            var Selectedvalue = $(this).val();
        });

        function hideall() {
            $("#collapse1").collapse('hide');
            $("#collapse2").collapse('hide');
            $("#collapse3").collapse('hide');
            $("#collapse4").collapse('hide');
            $("#collapsef").collapse('hide');
        }

        function initpanels() {
            hideall();
            $("#collapse1").collapse('show');
        }

        function show1() {
            hideall();
            save(2);
            $("#collapse1").collapse('show');
        }
        function show2() {
            hideall();
            save(2);
            $("#collapse2").collapse('show');
        }
        function show3() {
            hideall();
            save(2);
            $("#collapse3").collapse('show');
        }
        function show4() {
            hideall();
            save(2);
            $("#collapse4").collapse('show');
        }
        function showf() {
            hideall();
            save(2);
            $("#collapsef").collapse('show');
        }

        $("#part1Show").on("click", function () {
            show1();
        });

        $("#part2Show").on("click", function () {
            show2();
        });

        $("#part3Show").on("click", function () {
            show3();
        });

        $("#part4Show").on("click", function () {
            show4();
        });

        $("#partfShow").on("click", function () {
            showf();
        });
    });
</script>

@Html.Partial("partialModalDBQ")
